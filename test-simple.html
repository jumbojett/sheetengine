<!DOCTYPE html>
<html>
<head>
    <title>Simple SheetEngine Test</title>
</head>
<body>
    <canvas id="testcanvas" width="500" height="400" style="border: 1px solid black;"></canvas>
    <div id="debug"></div>

    <script src="/dist/sheetengine.js"></script>
    <script>
        try {
            console.log('SheetEngine loaded:', typeof sheetengine);
            console.log('Available methods:', Object.keys(sheetengine));

            const canvas = document.getElementById('testcanvas');
            const debug = document.getElementById('debug');

            debug.innerHTML = 'SheetEngine type: ' + typeof sheetengine + '<br>';

            if (typeof sheetengine !== 'undefined') {
                debug.innerHTML += 'SheetEngine loaded successfully<br>';
                debug.innerHTML += 'Available methods: ' + Object.keys(sheetengine).slice(0, 5).join(', ') + '...<br>';

                try {
                    sheetengine.scene.init(canvas, {w:500,h:400});
                    debug.innerHTML += 'Scene initialized successfully<br>';

                    // Create a simple sheet
                    const sheet = new sheetengine.Sheet({x:0,y:0,z:0}, {alphaD:0,betaD:0,gammaD:0}, {w:100,h:100});
                    sheet.context.fillStyle = '#FF0000';
                    sheet.context.fillRect(0,0,100,100);

                    debug.innerHTML += 'Sheet created successfully<br>';

                    // Draw the scene
                    sheetengine.calc.calculateAllSheets();
                    sheetengine.drawing.drawScene(true);

                    debug.innerHTML += 'Scene drawn successfully<br>';
                } catch (error) {
                    debug.innerHTML += 'Error during scene setup: ' + error.message + '<br>';
                    console.error('Scene setup error:', error);
                }
            } else {
                debug.innerHTML += 'ERROR: SheetEngine not loaded<br>';
            }
        } catch (error) {
            console.error('Global error:', error);
            document.getElementById('debug').innerHTML = 'Global error: ' + error.message;
        }
    </script>
</body>
</html>